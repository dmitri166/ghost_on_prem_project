# ArgoCD Constants and Configuration
# Centralized constants for all ArgoCD applications

# Repository Configuration
REPOSITORY_URL: "https://github.com/dmitri166/ghost_on_prem_project"
TARGET_REVISION: "master"
CLUSTER_SERVER: "https://kubernetes.default.svc"

# Project Names
DEFAULT_PROJECT: "default"
GHOST_APPS_PROJECT: "ghost-apps"

# Application Paths
GHOST_APP_PATH: "applications/ghost-app/helm"
MYSQL_APP_PATH: "infrastructure/mysql/helm"

# Chart Versions and Sources
CHARTS:
  metallb:
    repository: "https://metallb.github.io/metallb"
    chart: "metallb"
    version: "v0.14.8"
  ingress_nginx:
    repository: "https://kubernetes.github.io/ingress-nginx"
    chart: "ingress-nginx"
    version: "4.9.0"
  monitoring:
    repository: "https://prometheus-community.github.io/helm-charts"
    chart: "kube-prometheus-stack"
    version: "56.6.1"
  sealed_secrets:
    repository: "https://bitnami-labs.github.io/sealed-secrets"
    chart: "sealed-secrets"
    version: "2.15.1"
  keda:
    repository: "https://kedacore.github.io/charts"
    chart: "keda"
    version: "2.12.1"
  loki:
    repository: "https://grafana.github.io/helm-charts"
    chart: "loki"
    version: "5.0.0"
  promtail:
    repository: "https://grafana.github.io/helm-charts"
    chart: "promtail"
    version: "6.0.0"

# Network Configuration
NETWORKING:
  loadBalancer:
    ipRange: "172.18.255.200-172.18.255.250"
  static_ips:
    metallb: "172.18.255.100"
    argocd: "172.18.255.101"
    prometheus: "172.18.255.102"
    grafana: "172.18.255.103"
    alertmanager: "172.18.255.104"
    loki: "172.18.255.105"

# Environment Configuration
ENVIRONMENTS:
  dev:
    namespace: "ghost"
    valuesFile: "values-dev.yaml"
    replicaCount: 1
    resources:
      requests:
        cpu: "100m"
        memory: "128Mi"
      limits:
        cpu: "500m"
        memory: "512Mi"
    ingress:
      host: "ghost-dev.local"
      path: "/"
      tls: false
    autoscaling:
      enabled: true
      minReplicas: 1
      maxReplicas: 3
      targetCPUUtilizationPercentage: 70
    monitoring:
      enabled: true
      serviceMonitor: true
    security:
      podSecurityContext:
        runAsNonRoot: true
        runAsUser: 1000
        fsGroup: 2000
  staging:
    namespace: "ghost"
    valuesFile: "values-staging.yaml"
    replicaCount: 2
    resources:
      requests:
        cpu: "200m"
        memory: "256Mi"
      limits:
        cpu: "1000m"
        memory: "1Gi"
    ingress:
      host: "ghost-staging.local"
      path: "/"
      tls: false
    autoscaling:
      enabled: true
      minReplicas: 2
      maxReplicas: 4
      targetCPUUtilizationPercentage: 70
    monitoring:
      enabled: true
      serviceMonitor: true
    security:
      podSecurityContext:
        runAsNonRoot: true
        runAsUser: 1000
        fsGroup: 2000
  prod:
    namespace: "ghost"
    valuesFile: "values-prod.yaml"
    replicaCount: 3
    resources:
      requests:
        cpu: "500m"
        memory: "512Mi"
      limits:
        cpu: "2000m"
        memory: "2Gi"
    ingress:
      host: "ghost-prod.local"
      path: "/"
      tls: true
    autoscaling:
      enabled: true
      minReplicas: 2
      maxReplicas: 5
      targetCPUUtilizationPercentage: 70
    monitoring:
      enabled: true
      serviceMonitor: true
      prometheusRule: true
    security:
      podSecurityContext:
        runAsNonRoot: true
        runAsUser: 1000
        fsGroup: 2000

# Database Configuration
DATABASE:
  client: "mysql"
  host: "mysql.ghost.svc.cluster.local"
  port: "3306"
  user: "ghost"
  password: "ghost123"
  database: "ghost"
  rootPassword: "root123"

# Ghost Configuration
GHOST:
  image:
    repository: "ghost"
    tag: "5.75.1"
    pullPolicy: "IfNotPresent"
  service:
    port: 2368
    type: ClusterIP
  persistence:
    size: "10Gi"
    storageClass: "standard"

# Sync Policies
SYNC_POLICY:
  automated:
    prune: true
    selfHeal: true
  syncOptions:
    - "CreateNamespace=true"
  ignoreDifferences:
    - group: "apps"
      kind: "Deployment"
      jsonPointers:
        - "/metadata/annotations/argocd.argoproj.io~1refresh"

# Secrets Configuration
SECRETS:
  ghostDatabaseSecrets: "ghost-database-secrets"
  mysqlSecrets: "mysql-secrets"
